<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Retreat Registration</title>
  <link rel="stylesheet" href="index.css">
  <style>
    body { font-family: Arial, sans-serif; margin: 2em; }
    fieldset { margin-top: 1em; padding: 1em; }
    label { display: block; margin: 0.5em 0; }
    .hidden { display: none; }
  </style>
</head>
<body>
  <div class="container">
  <form id="registrationForm">
    <h2 class="rotate-in">The Midding Retreat</h2>
    <p>The Midding Retreat will be held October 10th-12th, to cover the cost of food and activities we charge $50 for the weekend. If you are unable to pay this please click 'I need to be sponsored' in the payment method section.
      We cannot wait to see you there!</p>
    <p>Please fill out the form below to register for the retreat. All fields are required</p>
    </p>
    <label for="firstName">First Name: 
      <input type="text" id="firstName" name="firstName" required>
    </label>
    <label for="lastName">Last Name:
      <input type="text" id="lastName" name="lastName" required>
    </label>
    <label for="dob">Date of Birth:
      <input type="date" id="dob" name="dob" required> 
    </label>
    <label for="email">Email:
      <input type="email" id="email" name="email" required>
    </label>
    <label for="phone">Phone Number:
      <input type="tel" id="phone" name="phone" required>
    </label>
    
    <!-- New Address Fields -->
    <label for="address">Address:
      <input type="text" id="address" name="address" required>
    </label>
    <label for="city">City:
      <input type="text" id="city" name="city" required>
    </label>
    <label for="state">State:
      <input type="text" id="state" name="state" maxlength="2" required>
    </label>
    <label for="zip">Zip Code:
      <input type="text" id="zip" name="zip" maxlength="10" required>
    </label>
    <!-- End Address Fields -->

    <label for="hasAllergies">Do you have any allergies?
      <select name="hasAllergies" id="hasAllergies" required>
        <option value="">Select</option>
        <option value="no">No</option>
        <option value="yes">Yes</option>
      </select>
    </label>
    <div id="allergyDetailsDiv" class="hidden">
      <label for="allergyDetails">Please specify:
        <input type="text" id="allergyDetails" name="allergyDetails">
      </label>
    </div>
    
    <!-- Emergency Contact 1 -->
    <fieldset> 
      <legend>Emergency Contact 1</legend>
      <label for="emergencyContact1Name">Name: 
        <input type="text" id="emergencyContact1Name" name="emergencyContact1Name" required>
      </label>
      <label for="emergencyContact1Phone">Phone: 
        <input type="tel" id="emergencyContact1Phone" name="emergencyContact1Phone" required>
      </label>
      <label for="emergencyContact1Email">Email: 
        <input type="email" id="emergencyContact1Email" name="emergencyContact1Email" required>
      </label>
      <label for="emergencyContact1Relationship">Relationship: 
        <select name="emergencyContact1Relationship" id="emergencyContact1Relationship" required>
          <option value="">Select</option>
          <option value="parent">Parent</option>
          <option value="sibling">Sibling</option>
          <option value="friend">Friend</option>
          <option value="other">Other</option>
        </select>
      </label>
    </fieldset>
    <h3>Choose your payment method</h3>
    <select name="paymentMethod" id="paymentMethod" required> 
      <option value="">Select</option>
      <option value="cash">Cash</option>
      <option value="check">Check</option>
      <option value="card">Card</option>
      <option value="paypal">PayPal</option>
      <option value="sponsored">I need to be sponsored</option>
    </select>
    <br><br>
    <button type="submit">Next</button>
  </form>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Show/hide allergy details
      document.getElementById('hasAllergies').addEventListener('change', function() {
        const allergyDiv = document.getElementById('allergyDetailsDiv');
        if (this.value === 'yes') {
          allergyDiv.classList.remove('hidden');
        } else {
          allergyDiv.classList.add('hidden');
          document.getElementById('allergyDetails').value = '';
        }
      });

      // Handle form submission
      document.getElementById('registrationForm').addEventListener('submit', function(e){
        e.preventDefault();
        // Save all form data to localStorage
        const formData = new FormData(e.target);
        for (const [key, value] of formData.entries()) {
          localStorage.setItem(key, value);
        }
        // Redirect to policies form
        window.location.href = "policies.html";
      });
    });
  </script>
</body>
</html>
